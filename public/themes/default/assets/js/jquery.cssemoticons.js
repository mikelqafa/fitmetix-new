!function(s){s.fn.emoticonize=function(e){for(var o=s.extend({},s.fn.emoticonize.defaults,e),t=[":-)",":o)",":c)",":^)",":-D",":-(",":-9",";-)",":-P",":-p",":-Þ",":-b",":-O",":-/",":-X",":-#",":'(","B-)","8-)",";*(",":-*",":-\\","?-)",": )",": ]","= ]","= )","8 )",": }",": D","8 D","X D","x D","= D",": (",": [",": {","= (","; )","; ]","; D",": P",": p","= P","= p",": b",": Þ",": O","8 O",": /","= /",": S",": #",": X","B )",": |",": \\","= \\",": *",": &gt;",": &lt;"],n=[":)",":]","=]","=)","8)",":}",":D",":(",":[",":{","=(",";)",";]",";D",":P",":p","=P","=p",":b",":Þ",":O",":/","=/",":S",":#",":X","B)",":|",":\\","=\\",":*",":&gt;",":&lt;"],c={"&gt;:)":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;;)":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;:(":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;: )":{cssClass:"red-emoticon small-emoticon"},"&gt;; )":{cssClass:"red-emoticon small-emoticon"},"&gt;: (":{cssClass:"red-emoticon small-emoticon"},";(":{cssClass:"red-emoticon spaced-emoticon"},"&lt;3":{cssClass:"pink-emoticon counter-rotated"},O_O:{cssClass:"no-rotate"},o_o:{cssClass:"no-rotate"},"0_o":{cssClass:"no-rotate"},O_o:{cssClass:"no-rotate"},T_T:{cssClass:"no-rotate"},"^_^":{cssClass:"no-rotate"},"O:)":{cssClass:"small-emoticon spaced-emoticon"},"O: )":{cssClass:"small-emoticon"},"8D":{cssClass:"small-emoticon spaced-emoticon"},XD:{cssClass:"small-emoticon spaced-emoticon"},xD:{cssClass:"small-emoticon spaced-emoticon"},"=D":{cssClass:"small-emoticon spaced-emoticon"},"8O":{cssClass:"small-emoticon spaced-emoticon"},"[+=..]":{cssClass:"no-rotate nintendo-controller"}},a=new RegExp("(\\"+[")","(","*","[","]","{","}","|","^","<",">","\\","?","+","=","."].join("|\\")+")","g"),i="(^|[\\s\\0])",l=t.length-1;l>=0;--l)t[l]=t[l].replace(a,"\\$1"),t[l]=new RegExp(i+"("+t[l]+")","g");for(l=n.length-1;l>=0;--l)n[l]=n[l].replace(a,"\\$1"),n[l]=new RegExp(i+"("+n[l]+")","g");for(var m in c)c[m].regexp=m.replace(a,"\\$1"),c[m].regexp=new RegExp(i+"("+c[m].regexp+")","g");var r="span.css-emoticon";o.exclude&&(r+=","+o.exclude);var p=r.split(",");return this.not(r).each(function(){var e=s(this),a="css-emoticon";o.animate&&(a+=" un-transformed-emoticon animated-emoticon");for(var i in c)specialCssClass=a+" "+c[i].cssClass,e.html(e.html().replace(c[i].regexp,"$1<span class='"+specialCssClass+"'>$2</span>"));s(t).each(function(){e.html(e.html().replace(this,"$1<span class='"+a+"'>$2</span>"))}),s(n).each(function(){e.html(e.html().replace(this,"$1<span class='"+a+" spaced-emoticon'>$2</span>"))}),s.each(p,function(o,t){e.find(s.trim(t)+" span.css-emoticon").each(function(){s(this).replaceWith(s(this).text())})}),o.animate&&setTimeout(function(){s(".un-transformed-emoticon").removeClass("un-transformed-emoticon")},o.delay)})},s.fn.unemoticonize=function(e){var o=s.extend({},s.fn.emoticonize.defaults,e);return this.each(function(){s(this).find("span.css-emoticon").each(function(){var e=s(this);o.animate?(e.addClass("un-transformed-emoticon"),setTimeout(function(){e.replaceWith(e.text())},o.delay)):e.replaceWith(e.text())})})},s.fn.emoticonize.defaults={animate:!0,delay:500,exclude:"pre,code,.no-emoticons"}}(jQuery);